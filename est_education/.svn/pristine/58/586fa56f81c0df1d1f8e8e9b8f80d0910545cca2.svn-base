<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Skill">
	<!-- 멤버 - 목록 조회 -->
	<select id="selectSkillList" parameterType="hashmap" resultType="com.skill.vo.SkillVo">
		<![CDATA[
			SELECT 
			SKILL_SQ,
			SKILL_TYP_CD,
			SKILL_TYP_NM,
			SKILL_TYP_DTL_CD,
			SKILL_TYP_DTL_NM
			FROM EDUCATION.TB_EST_SKILL
		]]>
		<where>
		    <if test="SKILL_TYP_NM != NULL">
		    	AND SKILL_TYP_NM = #{SKILL_TYP_NM} 
		    </if>
		    <if test="SKILL_TYP_DTL_NM != NULL">
		    	AND SKILL_TYP_DTL_NM LIKE CONCAT('%', #{SKILL_TYP_DTL_NM} , '%') 
		    </if>
		    <if test="ALL != NULL">
		    	AND SKILL_TYP_NM LIKE CONCAT('%', #{ALL} , '%') OR SKILL_TYP_DTL_NM LIKE CONCAT('%', #{ALL} , '%') 
		    </if>
		</where>
			<![CDATA[
			ORDER BY SKILL_TYP_CD
				]]>
	</select>
	
	<insert id="insertSkill" parameterType="com.skill.vo.SkillVo">
		<![CDATA[
			INSERT INTO EDUCATION.TB_EST_SKILL (
			SKILL_SQ,
			SKILL_TYP_CD,
			SKILL_TYP_NM,
			SKILL_TYP_DTL_CD,
			SKILL_TYP_DTL_NM
			) VALUES (
				  #{skillSq}
				, #{skillTypCd}
				, #{skillTypNm}
				, #{skillTypDtlCd}
				, #{skillTypDtlNm}
			)
		]]>
	</insert>
	
	
	
	<select id="selectSkillOne" parameterType="String" resultType="com.skill.vo.SkillVo">
		<![CDATA[
			SELECT 	
			SKILL_SQ,
			SKILL_TYP_CD,
			SKILL_TYP_NM,
			SKILL_TYP_DTL_CD,
			SKILL_TYP_DTL_NM
			FROM EDUCATION.TB_EST_SKILL WHERE SKILL_SQ = #{skillSq}
		]]>
	</select>
	
	<update id="updateSkill" parameterType="hashmap">
		<![CDATA[
			UPDATE EDUCATION.TB_EST_SKILL SET
			SKILL_TYP_CD = #{SKILL_TYP_CD},
			SKILL_TYP_NM = #{SKILL_TYP_NM},
			SKILL_TYP_DTL_CD = #{SKILL_TYP_DTL_CD},
			SKILL_TYP_DTL_NM = #{SKILL_TYP_DTL_NM}
			WHERE SKILL_SQ = #{SKILL_SQ}
		]]>
	</update>
	
	<delete id="deleteSkill" parameterType="String">
		<![CDATA[
			DELETE FROM EDUCATION.TB_EST_SKILL
			WHERE SKILL_SQ = #{skillSq}
		]]>
	</delete>

</mapper>