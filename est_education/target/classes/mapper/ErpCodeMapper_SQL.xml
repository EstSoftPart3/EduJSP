<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="erpCode">

	<!-- <<<<<<<<<<<<<<<<<<아래 내용>>>>>>>>>>>>>>>>>>> [[ 그룹 코드 ]] 관련 -->

	<!-- 그룹 코드 - 목록 조회 -->
	<select id="selectGroupCodeList" parameterType="hashmap" resultType="com.erp.admin.system.code.vo.GroupCodeVo">
		SELECT 
		      GRP_CD
			, COMPNY_SQ
			, GRP_CD_NM
			, GRP_CD_ORDER
			, GRP_CD_USE_WHTHR
			, GRP_CD_ENRLM_DT
			, GRP_CD_CRRCTN_DT
			, GRP_CD_CRRCTN_USR_SQ
			, GRP_CD_NOTE
		FROM EDU_JSP.TB_EEP_COMM_CD_M
		<where>
		
			<if test="department == 'grpCd' ">
		    	AND GRP_CD LIKE CONCAT('%', #{keyWord}, '%')
		    </if>
		    <if test="department == 'grpCdNm' ">
		    	AND GRP_CD_NM LIKE CONCAT('%', #{keyWord}, '%')
		    </if>		
		
		    <if test="department == 'all' and keyWord != '' and keyWord != NULL">
		    	AND GRP_CD LIKE CONCAT('%', #{keyWord}, '%') OR GRP_CD_NM LIKE CONCAT('%', #{keyWord}, '%')
		    	
		    </if>
		    <if test="isUse != 'ALL' and isUse != NULL">
		    	AND GRP_CD_USE_WHTHR = #{isUse}
		    </if>
		</where>
	</select>
	
	
	
	<!-- 그룹 코드 - 추가 -->
	<insert id="insertGroupCode" parameterType="com.erp.admin.system.code.vo.GroupCodeVo">
		INSERT INTO EDU_JSP.TB_EEP_COMM_CD_M (
			  GRP_CD
			, COMPNY_SQ
			, GRP_CD_NM
			, GRP_CD_ORDER
			, GRP_CD_USE_WHTHR
			, GRP_CD_ENRLM_DT
			, GRP_CD_CRRCTN_DT
			, GRP_CD_CRRCTN_USR_SQ
			, GRP_CD_NOTE
		) VALUES (
			  #{grpCd}
			, #{compnySq}
			, #{grpCdNm}
			, #{grpCdOrder}
			, #{grpCdUseWhthr}
			, default
			, sysdate()
			, #{grpCdCrrctnUsrSq}
			, #{grpCdNote}
		)
	</insert>
	
	
	<!-- 그룹 코드 - 수정 -->
	<update id="updateGroupCode" parameterType="com.erp.admin.system.code.vo.GroupCodeVo">
		<![CDATA[
			UPDATE EDU_JSP.TB_EEP_COMM_CD_M SET
			  	COMPNY_SQ       			= #{compnySq}
				, GRP_CD_NM           		= #{grpCdNm}
				, GRP_CD_ORDER            	= #{grpCdOrder}
				, GRP_CD_USE_WHTHR       	= #{grpCdUseWhthr}
				, GRP_CD_CRRCTN_DT          = sysdate()
				, GRP_CD_CRRCTN_USR_SQ      = #{grpCdCrrctnUsrSq}
				, GRP_CD_NOTE             	= #{grpCdNote}
			WHERE GRP_CD = #{grpCd}
		]]>
	</update>
	
	
	<!-- 그룹 코드 - 삭제 -->
	<delete id="deleteGroupCode" parameterType="com.erp.admin.system.code.vo.GroupCodeVo">
		<![CDATA[
			DELETE FROM EDU_JSP.TB_EEP_COMM_CD_M
			WHERE GRP_CD = #{grpCd}
		]]>
	</delete>
	
	
	
	
	
	<!-- <<<<<<<<<<<<<<<<<<아래 내용>>>>>>>>>>>>>>>>>>> [[ 상세 코드 ]] 관련 -->
	<select id="selectDetailCodeList" parameterType="hashmap" resultType="com.erp.admin.system.code.vo.DetailCodeVo">
		SELECT 
			GRP_CD
		    , DTL_CD
			, COMPNY_SQ
			, DTL_CD_NM
			, DTL_CD_ORDER
			, DTL_CD_USE_WHTHR
			, DTL_CD_ENRLM_DT
			, DTL_CD_CRRCTN_DT
			, DTL_CD_CRRCTN_USR_SQ
			, DTL_CD_PRPRT_VAL_1
			, DTL_CD_PRPRT_VAL_2
			, DTL_CD_PRPRT_VAL_3
			, DTL_CD_NOTE
		FROM EDU_JSP.TB_EEP_COMM_CD_S
		
		<where>
			
			<if test="grpCd != '' and isUse != NULL">
		    	AND GRP_CD = #{grpCd}
		    </if>
		
			<if test="isUse != 'ALL' and isUse != NULL">
		    	AND DTL_CD_USE_WHTHR = #{isUse}
		    </if>
		    
		</where>
	</select>
	
	
	<!-- 상세 코드 - 추가 -->
	<insert id="insertDetailCode" parameterType="com.erp.admin.system.code.vo.DetailCodeVo">
		INSERT INTO EDU_JSP.TB_EEP_COMM_CD_S (
			  GRP_CD
			, DTL_CD
			, COMPNY_SQ
			, DTL_CD_NM
			, DTL_CD_ORDER
			, DTL_CD_USE_WHTHR
			, DTL_CD_ENRLM_DT
			, DTL_CD_CRRCTN_DT
			, DTL_CD_CRRCTN_USR_SQ
			, DTL_CD_PRPRT_VAL_1
			, DTL_CD_PRPRT_VAL_2
			, DTL_CD_PRPRT_VAL_3
			, DTL_CD_NOTE
		) VALUES (
			  #{grpCd}
			, #{dtlCd}
			, #{compnySq}
			, #{dtlCdNm}
			, #{dtlCdOrder}
			, #{dtlCdUseWhthr}
			, default
			, sysdate()
			, #{dtlCdCrrctnUsrSq}
			, #{dtlCdPrprtVal1}
			, #{dtlCdPrprtVal2}
			, #{dtlCdPrprtVal3}
			, #{dtlCdNote}
		)
	</insert>
	
	
	<!-- 상세 코드 - 수정 -->
	<update id="updateDetailCode" parameterType="com.erp.admin.system.code.vo.DetailCodeVo">
		<![CDATA[
			UPDATE EDU_JSP.TB_EEP_COMM_CD_S SET
			  	COMPNY_SQ       			= #{compnySq}
				, DTL_CD_NM           		= #{dtlCdNm}
				, DTL_CD_ORDER            	= #{dtlCdOrder}
				, DTL_CD_USE_WHTHR       	= #{dtlCdUseWhthr}
				, DTL_CD_CRRCTN_DT          = sysdate()
				, DTL_CD_CRRCTN_USR_SQ      = #{dtlCdCrrctnUsrSq}
				, DTL_CD_PRPRT_VAL_1             	= #{dtlCdPrprtVal1}
				, DTL_CD_PRPRT_VAL_2             	= #{dtlCdPrprtVal2}
				, DTL_CD_PRPRT_VAL_3            	= #{dtlCdPrprtVal3}
				, DTL_CD_NOTE             	= #{dtlCdNote}
			WHERE DTL_CD = #{dtlCd}
		]]>
	</update>
	
	
	<!-- 상세 코드 - 삭제 -->
	<delete id="deleteDetailCode" parameterType="com.erp.admin.system.code.vo.DetailCodeVo">
		<![CDATA[
			DELETE FROM EDU_JSP.TB_EEP_COMM_CD_S
			WHERE DTL_CD = #{dtlCd}
		]]>
	</delete>
	
	
	
	

</mapper>